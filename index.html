<!DOCTYPE html>
<html lang="zh-cn">
  <head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="Life is short, happy it!"><link rel="alternate" href="/atom.xml" title="YY"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0">
<link rel="canonical" href="https://buggoing.github.io/">

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css"><link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css">
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0">

<script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":true,"latex":false};
</script>

    <title>YY</title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">YY</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">首页
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">归档
          </li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签
          </li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">YY</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            首页
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            归档
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/categories/">
            分类
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            标签
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/about/">
            关于
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><section id="posts" class="posts"><article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/24/Linux_Ubuntu/Ubuntu关闭系统错误报告/">Ubuntu关闭系统错误报告</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-24
        </span><span class="post-category">
            <a href="/categories/linux/">Linux/Ubuntu</a>
            </span>
        </div>
    </header>

    <div class="post-content"><ol>
<li>vi /etc/default/apport<br>找到 enabled=1 这一行，并改变到0</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># set this to 0 to disable apport, or to 1 to enable it</span><br><span class="line"># you can temporarily override this with</span><br><span class="line"># sudo service apport start force_start=1</span><br><span class="line">enabled=0</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>sudo stop apport</li>
</ol>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/24/python/python2.7中文无法正常打印/">python2.7无法正常处理中文</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-24
        </span><span class="post-category">
            <a href="/categories/python/">Python</a>
            </span>
        </div>
    </header>

    <div class="post-content"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># encoding=utf8  </span><br><span class="line">import sys  </span><br><span class="line">  </span><br><span class="line">reload(sys)  </span><br><span class="line">sys.setdefaultencoding(&apos;utf8&apos;)</span><br></pre></td></tr></table></figure>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/23/Linux_Ubuntu/使用sudo不用密码/">Ubuntu 16使sudo不用密码</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-23
        </span><span class="post-category">
            <a href="/categories/linux/">Linux/Ubuntu</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p>场景：某个脚本中含有 <code>sudo ...</code>的命令，用户登录后会自动执行此脚本<br>方法：</p>
<ol>
<li><p>新建文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/sudoers.d</span><br><span class="line">touch nopasswd4sudo</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>vi nopasswd4sudo</code>，添加以下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username ALL=(ALL) NOPASSWD : ALL</span><br></pre></td></tr></table></figure></li>
</ol>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/23/python/pip导出项目依赖/">pip导出项目依赖</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-23
        </span><span class="post-category">
            <a href="/categories/python/">Python</a>
            </span>
        </div>
    </header>

    <div class="post-content"><h3 id="如果项目是virtualenv里的"><a href="#如果项目是virtualenv里的" class="headerlink" title="如果项目是virtualenv里的"></a>如果项目是virtualenv里的</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>

<h3 id="否则如下。因为freeze会导出整个环境的依赖"><a href="#否则如下。因为freeze会导出整个环境的依赖" class="headerlink" title="否则如下。因为freeze会导出整个环境的依赖"></a>否则如下。因为freeze会导出整个环境的依赖</h3><p>1、安装pipreqs</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pipreqs</span><br></pre></td></tr></table></figure>

<p>2、导出项目依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipreqs ./</span><br></pre></td></tr></table></figure>

<p>3、根据导出的pip安装包表安装pip包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>


        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/22/macos/tmux配置/">tmux配置</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-22
        </span><span class="post-category">
            <a href="/categories/macos/">macOS</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p>.tmux.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setw -g mode-keys vi</span><br><span class="line">bind -r H resize-pane -L 20</span><br><span class="line">set -g mouse on</span><br><span class="line">set -g prefix C-a</span><br><span class="line">unbind C-b</span><br></pre></td></tr></table></figure>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/21/python/指定安装软件源/">pip安装模块时指定软件源</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-21
        </span><span class="post-category">
            <a href="/categories/python/">Python</a>
            </span>
        </div>
    </header>

    <div class="post-content"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple matplotlib</span><br><span class="line">pip install -i https://pypi.douban.com/simple/ requests</span><br></pre></td></tr></table></figure>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/Node.js/深入浅出Node.js/">深入浅出Node.js</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/nodejs/">Node.js</a>
            </span>
        </div>
    </header>

    <div class="post-content"><h3 id="第五章-内存控制"><a href="#第五章-内存控制" class="headerlink" title="第五章 内存控制"></a>第五章 内存控制</h3><ul>
<li>5.1.3<br>V8分配的堆内存在64位和32位下的的最大值分别为1400MB和700MB。堆分为新生代和旧生代两部分。新生内存的最大值在64位系统32位系统上分别为32 MB和16 MB。</li>
<li>5.1.4<br>垃圾回收时，新生代中的对象采用Scavenge算法进行垃圾回收<br>老生代采用 Mark-Sweep（标记清除） &amp; Mark-Compact（标记整理）回收算法。</li>
<li>5.4<br>通常，造成内存泄漏的原因有如下几个：<ul>
<li>缓存</li>
<li>队列消费不及时</li>
<li>作用域未释放</li>
</ul>
</li>
</ul>
<h3 id="第八章"><a href="#第八章" class="headerlink" title="第八章"></a>第八章</h3><h4 id="8-1-6-缓存"><a href="#8-1-6-缓存" class="headerlink" title="8.1.6 缓存"></a>8.1.6 缓存</h4><h5 id="If-Modified-Since-Last-Modified"><a href="#If-Modified-Since-Last-Modified" class="headerlink" title="If-Modified-Since/Last-Modified"></a>If-Modified-Since/Last-Modified</h5><p>  缺点：只能精确到秒级，更新频繁的内容则无效，文件的时间戳改动文件内容不一定改动。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if (lastModified === req.headers[&apos;if-modified-since&apos;]) &#123;</span><br><span class="line">  res.writeHead(304, &quot;Not Modified&quot;);</span><br><span class="line">  res.end();</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  fs.readFile(filename, function(err, file) &#123;</span><br><span class="line">  var lastModified = stat.mtime.toUTCString();</span><br><span class="line">  res.setHeader(&quot;Last-Modified&quot;, lastModified);</span><br></pre></td></tr></table></figure>

<h5 id="HTTP1-1中引入了ETag来解决这个问题，-If-None-Match-ETag"><a href="#HTTP1-1中引入了ETag来解决这个问题，-If-None-Match-ETag" class="headerlink" title="HTTP1.1中引入了ETag来解决这个问题， If-None-Match/ETag"></a>HTTP1.1中引入了ETag来解决这个问题， If-None-Match/ETag</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var handle = function (req, res) &#123;</span><br><span class="line">fs.readFile(filename, function(err, file) &#123;</span><br><span class="line">  var hash = getHash(file);</span><br><span class="line">  var noneMatch = req.headers[&apos;if-none-match&apos;];</span><br><span class="line">  if (hash === noneMatch) &#123;</span><br><span class="line">    res.writeHead(304, &quot;Not Modified&quot;);</span><br><span class="line">    res.end();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    res.setHeader(&quot;ETag&quot;, hash);</span><br><span class="line">    res.writeHead(200, &quot;Ok&quot;);</span><br><span class="line">    res.end(file);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="Cache-Control-http1-1"><a href="#Cache-Control-http1-1" class="headerlink" title="Cache-Control(http1.1)"></a>Cache-Control(http1.1)</h5><pre><code>设置了 max-age，它比Expires 优秀的地方在于， Cache-Control能解决客户端与服务端时间不同步带来的不一致性问题，由于在HTTP1.0时还不支持max-age ，如今的服务器端同时支持对Expires和Cache-Control进行设置，此时max-age会覆盖Expires。</code></pre><h4 id="清除缓存"><a href="#清除缓存" class="headerlink" title="清除缓存"></a>清除缓存</h4><p>每次发布，路径中跟随Web应用的版本号：<code>http://url.com/?v=20130501。</code><br>每次发布，路径中跟随文件内容的hash： <code>http://url.com/?hash=afadfadwe。</code></p>
<h3 id="8-2-数据上传"><a href="#8-2-数据上传" class="headerlink" title="8.2 数据上传"></a>8.2 数据上传</h3><h4 id="表单数据"><a href="#表单数据" class="headerlink" title="表单数据"></a>表单数据</h4><ul>
<li>默认的表单提交，请求头中的 Content-Type为 application/x-www-form-urlencoded，如：<code>Content-Type: application/x-www-form-urlencoded</code></li>
<li>JSON和XML文件，JSON文件的Content-Type为 application/json ，XML的为application/xml<br>需要注意的是，在 Content-Type 中可能还附带如下的编码信息：<br><code>Content-Type: application/json; charset=utf-8</code><h4 id="8-2-3-附件上传"><a href="#8-2-3-附件上传" class="headerlink" title="8.2.3 附件上传"></a>8.2.3 附件上传</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: multipart/form-data; boundary=AaB03x</span><br><span class="line">Content-Length: 18231</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="8-2-4-数据上传与安全"><a href="#8-2-4-数据上传与安全" class="headerlink" title="8.2.4 数据上传与安全"></a>8.2.4 数据上传与安全</h4><ol>
<li>内存限制<br>限制上传内容的大小，一旦超过限制，停止接收数据，并相应400状态码<br>通过流式解析，将数据导向磁盘中，Node只保存文件路径等小数据</li>
</ol>
<h3 id="8-5-页面渲染"><a href="#8-5-页面渲染" class="headerlink" title="8.5 页面渲染"></a>8.5 页面渲染</h3><ol>
<li>MIME<br>MIME的全称是Multipurpose Internet Mail Extensions，最早用在电子邮件中，后来也用到浏览器中。不同的文件类型有不同的MIME，浏览器也有相应不同的处理方式。</li>
<li>附件下载<br>设置Content-Disposition字段：<br>即时查看时字段为为 inline ，数据可以存为附件时，值为attachment，如：<br><code>Content-Disposition: attachment; filename=&quot;filename.ext&quot;</code></li>
</ol>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/Node.js/sort方法/">sort排序</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/nodejs/">Node.js</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p>数组的sort方法在排序时，默认会调用每个元素的toString()方法后在进行比较：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; let arr = [1,15,2,25]</span><br><span class="line">undefined</span><br><span class="line">&gt; arr.sort()</span><br><span class="line">[ 1, 15, 2, 25 ]</span><br></pre></td></tr></table></figure>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/Linux_Ubuntu/Ubuntu常用工具命令/">Ubuntu常用工具命令</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/linux/">Linux/Ubuntu</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p>显示屏幕分辨率</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xrandr</span><br></pre></td></tr></table></figure>

<p>查看端口占用情况</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo netstat -ntlp # 所有端口</span><br><span class="line">sudo lsof -i:8080 # 特定端口</span><br></pre></td></tr></table></figure>

<p>Ubuntu自带防火墙</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw enable</span><br><span class="line">sudo ufw default deny # 设置默认拒绝暴露出任何端口</span><br><span class="line">sudo ufw allow 8080</span><br><span class="line">sudo ufw delete allow 8080</span><br><span class="line">sudo ufw disable #关闭ufw功能</span><br></pre></td></tr></table></figure>

<p>按cpu占用率排序查看进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | sort -k3r |head -n 5</span><br></pre></td></tr></table></figure>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/计算机网络/">计算机网络</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/networks/">Networks</a>
            </span>
        </div>
    </header>

    <div class="post-content"><h2 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h2><h3 id="ppp协议"><a href="#ppp协议" class="headerlink" title="ppp协议"></a>ppp协议</h3><p><img src="/images/computer_network/ppp_protocol_mini.jpg" alt="ppp协议" title="ppp协议"></p>
<h3 id="MAC帧的格式"><a href="#MAC帧的格式" class="headerlink" title="MAC帧的格式"></a>MAC帧的格式</h3><p>常用的以太网MAC帧格式有两种，一种是以太网V2，另一种是IEEE的802.3标准<br><img src="/images/computer_network/ethernet_mac_mini.jpg" alt="以太网V2" title="以太网V2"></p>
<h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><h3 id="IP数据报格式"><a href="#IP数据报格式" class="headerlink" title="IP数据报格式"></a>IP数据报格式</h3><p><img src="/images/computer_network/ip_data_format_mini.jpg" alt="ppp协议" title="ppp协议"></p>
<h3 id="路由选择协议"><a href="#路由选择协议" class="headerlink" title="路由选择协议"></a>路由选择协议</h3><h4 id="RIP协议"><a href="#RIP协议" class="headerlink" title="RIP协议"></a>RIP协议</h4><p>RIP协议使用距离向量算法<br>特点：好消息传得快，坏消息传得慢，网络出现故障时，要较长时间才把这个信息传到所有路由器<br>优点：实现简单，开销小，适用于规模较小的网络中<br><img src="/images/computer_network/rip_distance_vector_mini.jpg" alt="ppp协议" title="ppp协议"></p>
<h4 id="OSPF-Open-Shortest-Path-First-开放最短路径优先-协议"><a href="#OSPF-Open-Shortest-Path-First-开放最短路径优先-协议" class="headerlink" title="OSPF(Open Shortest Path First,开放最短路径优先)协议"></a>OSPF(Open Shortest Path First,开放最短路径优先)协议</h4>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/Node.js/understanding_es6/">understanding_es6</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/nodejs/">Node.js</a>
            </span>
        </div>
    </header>

    <div class="post-content"><h3 id="chapter-3"><a href="#chapter-3" class="headerlink" title="chapter 3"></a>chapter 3</h3><h4 id="Rest-Parameters"><a href="#Rest-Parameters" class="headerlink" title="Rest Parameters"></a>Rest Parameters</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function pick(object, ...keys) &#123;</span><br><span class="line">    let result = Object.create(null);</span><br><span class="line">    for (let i = 0, len = keys.length; i &lt; len; i++) &#123;</span><br><span class="line">        result[keys[i]] = object[keys[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Rest parameters have two restrictions. The first restriction is that there can be only one rest parameter, and the rest parameter must be last.The second restriction is that rest parameters cannot be used in an object literal setter. That means this code would also cause a syntax error:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let object = &#123;</span><br><span class="line">// Syntax error: Can&apos;t use rest param in setter</span><br><span class="line">set name(...value) &#123;</span><br><span class="line">// do something</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>This restriction exists because object literal setters are restricted to a single argument. Rest parameters are, by definition, an infinite number of<br>arguments</p>
<h4 id="arrow-function"><a href="#arrow-function" class="headerlink" title="arrow function"></a>arrow function</h4><p>But an arrow function that wants to return an object literal outside a function body must wrap the literal in parentheses. For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let getTempItem = id =&gt; (&#123; id: id, name: &quot;Temp&quot; &#125;);</span><br><span class="line">// effectively equivalent to:</span><br><span class="line">let getTempItem = function(id) &#123;</span><br><span class="line">return &#123;</span><br><span class="line">id: id,</span><br><span class="line">name: &quot;Temp&quot;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="Chapter-7-sets-and-maps"><a href="#Chapter-7-sets-and-maps" class="headerlink" title="Chapter 7 sets and maps"></a>Chapter 7 sets and maps</h3><h4 id="Sets"><a href="#Sets" class="headerlink" title="Sets"></a>Sets</h4><p>ECMAScript 6 adds a Set type that is an ordered list of values without duplicates</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">let set = new Set();</span><br><span class="line">set.add(5);</span><br><span class="line">set.add(&quot;5&quot;);</span><br><span class="line">console.log(set.has(5)); // true</span><br><span class="line">set.delete(5);</span><br><span class="line">console.log(set.has(5)); // false</span><br><span class="line">console.log(set.size); // 1</span><br><span class="line">set.clear();</span><br><span class="line">console.log(set.has(&quot;5&quot;)); // false</span><br><span class="line">console.log(set.size);</span><br><span class="line"></span><br><span class="line">let set = new Set([1, 2, 3, 3, 3, 4, 5])</span><br><span class="line">set.forEach(function(value, key, ownerSet) &#123;</span><br><span class="line">  console.log(key + &quot; &quot; + value);</span><br><span class="line">  console.log(ownerSet === set);</span><br><span class="line">&#125;);</span><br><span class="line">array = [...set];</span><br><span class="line">console.log(array);</span><br></pre></td></tr></table></figure>

<p>ECMAScript 6 also includes weak sets, which only store weak object references and cannot store primitive values</p>
<ul>
<li>sets vs weak sets<br>• In a WeakSet instance, the add() method, has() method, and delete()<br>method all throw an error when passed a nonobject.<br>• Weak sets aren’t iterables and therefore cannot be used in a for-of loop.<br>• Weak sets don’t expose any iterators (such as the keys() and values()<br>methods), so there is no way to programmatically determine the con-<br>tents of a weak set.<br>• Weak sets don’t have a forEach() method.<br>• Weak sets don’t have a size property.<h3 id="Maps"><a href="#Maps" class="headerlink" title="Maps"></a>Maps</h3>The ECMAScript 6 Map type is an ordered list of key-value pairs, where the key and the value can be any type<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">let map = new Map();</span><br><span class="line">map.set(&quot;name&quot;, &quot;Nicholas&quot;);</span><br><span class="line">map.set(&quot;age&quot;, 25);</span><br><span class="line">console.log(map.size); // 2</span><br><span class="line">console.log(map.has(&quot;name&quot;)); // true</span><br><span class="line">console.log(map.get(&quot;name&quot;)); // &quot;Nicholas&quot;</span><br><span class="line">console.log(map.has(&quot;age&quot;)); // true</span><br><span class="line">console.log(map.get(&quot;age&quot;)); // 25</span><br><span class="line">map.delete(&quot;name&quot;);</span><br><span class="line">console.log(map.has(&quot;name&quot;)); // false</span><br><span class="line">console.log(map.get(&quot;name&quot;)); // undefined</span><br><span class="line">console.log(map.size); // 1</span><br><span class="line">map.clear();</span><br><span class="line">console.log(map.has(&quot;name&quot;)); // false</span><br><span class="line">console.log(map.get(&quot;name&quot;)); // undefined</span><br><span class="line">console.log(map.has(&quot;age&quot;)); // false</span><br><span class="line">console.log(map.get(&quot;age&quot;)); // undefined</span><br><span class="line">console.log(map.size); // 0</span><br><span class="line"></span><br><span class="line">let map = new Map([[&quot;name&quot;, &quot;Nicholas&quot;], [&quot;age&quot;, 25]]);</span><br><span class="line"></span><br><span class="line">let map = new Map([[&quot;name&quot;, &quot;Nicholas&quot;], [&quot;age&quot;, 25]]);</span><br><span class="line">map.forEach(function(value, key, ownerMap) &#123;</span><br><span class="line">console.log(key + &quot; &quot; + value);</span><br><span class="line">console.log(ownerMap === map);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Chapter8-Iterators-and-Generators"><a href="#Chapter8-Iterators-and-Generators" class="headerlink" title="Chapter8 Iterators and Generators"></a>Chapter8 Iterators and Generators</h3><p>Iterators are objects with a specific interface designed for iteration. All iterator objects have a next() method that returns a result object<br>A generator is a function that returns an iterator<br>You can use the yield keyword only inside generators. Using yield anywhere<br>else is a syntax error, including in functions that are inside generators, such as:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function *createIterator(items) &#123;</span><br><span class="line">items.forEach(function(item) &#123;</span><br><span class="line">// syntax error</span><br><span class="line">yield item + 1;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>note:</strong> Creating an arrow function that is also a generator is not possible.<br>an iterable is an object with a Symbol.iterator property</p>
<h3 id="Chapter-9-Introducing-Javascript-Classes"><a href="#Chapter-9-Introducing-Javascript-Classes" class="headerlink" title="Chapter 9 Introducing Javascript Classes"></a>Chapter 9 Introducing Javascript Classes</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class PersonClass &#123;</span><br><span class="line">// equivalent of the PersonType constructor</span><br><span class="line">constructor() &#123;</span><br><span class="line">  this.items = [];</span><br><span class="line">&#125;</span><br><span class="line">*[Symbol.iterator]() &#123;</span><br><span class="line">  yield *this.items.values();</span><br><span class="line">&#125;</span><br><span class="line">// equivalent of PersonType.prototype.sayName</span><br><span class="line">sayName() &#123;</span><br><span class="line">  console.log(this.name);</span><br><span class="line">&#125;</span><br><span class="line">// equivalent of PersonType.create</span><br><span class="line">static create(name) &#123;</span><br><span class="line">  return new PersonClass(name);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">let person = PersonClass.create(&quot;Nicholas&quot;);</span><br></pre></td></tr></table></figure>

<p><strong>note</strong> Static members are not accessible from instances. You must always access static members from the class directly.</p>
<h4 id="Inheritance-with-Derived-Classes"><a href="#Inheritance-with-Derived-Classes" class="headerlink" title="Inheritance with Derived Classes"></a>Inheritance with Derived Classes</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Square extends Rectangle &#123;</span><br><span class="line">// no constructor</span><br><span class="line">&#125;</span><br><span class="line">// is equivalent to</span><br><span class="line">class Square extends Rectangle &#123;</span><br><span class="line">constructor(...args) &#123;</span><br><span class="line">super(...args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>notes on using super()</strong><br>Keep the following key points in mind when you’re using super() :</p>
<ul>
<li>You can only use super() in a derived class constructor. If you try to use it in a non derived class (a class that doesn’t use extends ) or a function, it will throw an error.</li>
<li>You must call super() before accessing this in the constructor. Because<br>super() is responsible for initializing this , attempting to access this before calling super() results in an error.</li>
<li>The only way to avoid calling super() is to return an object from the class constructor. </li>
</ul>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/Node.js/for_in_vs_for_of/">for...in vs for...of</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/nodejs/">Node.js</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p>for…in循环读取键名，for…of循环读取键值。<br>for…of遍历数组时，只返回具有数字索引的属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let arr = [3,5,7]</span><br><span class="line">arr.foo = &apos;hello&apos;</span><br><span class="line">for (let i in arr)</span><br><span class="line">  console.log(i);//0, 1, 2, foo</span><br><span class="line"></span><br><span class="line">for (let i of arr)</span><br><span class="line">  console.log(i);//3,5,7</span><br></pre></td></tr></table></figure>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/docker/docker使用记录/">Docker使用记录</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/docker/">Docker</a>
            </span>
        </div>
    </header>

    <div class="post-content"><h3 id="docker-设置时区"><a href="#docker-设置时区" class="headerlink" title="docker 设置时区"></a>docker 设置时区</h3><p>compose.yml    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">environment:</span><br><span class="line">      - TZ=Asia/Shanghai</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run </span><br><span class="line">-e &quot;TZ=Asia/Shanghai&quot;</span><br></pre></td></tr></table></figure>

<h3 id="修改镜像源地址-链接"><a href="#修改镜像源地址-链接" class="headerlink" title="修改镜像源地址 链接"></a>修改镜像源地址 <a href="https://airycanon.me/docker-jing-xiang-yuan-de-xiu-gai-fang-shi/" target="_blank" rel="noopener">链接</a></h3><h3 id="非root用户直接运行docker"><a href="#非root用户直接运行docker" class="headerlink" title="非root用户直接运行docker"></a>非root用户直接运行docker</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker</span><br><span class="line">sudo usermod -aG  docker $USER</span><br></pre></td></tr></table></figure>

<h3 id="设置localhost为宿主机的localhoast"><a href="#设置localhost为宿主机的localhoast" class="headerlink" title="设置localhost为宿主机的localhoast"></a>设置localhost为宿主机的localhoast</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --network选项</span><br></pre></td></tr></table></figure>

<h3 id="build时使用代理"><a href="#build时使用代理" class="headerlink" title="build时使用代理"></a>build时使用代理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build --build-arg http_proxy=&quot;...&quot;</span><br></pre></td></tr></table></figure>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/go/设置代理，方便安装go的官方包/">设置代理，方便安装go的官方包</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/go/">Go</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p>先确保shadowsocksR能正常工作<br><code>https_proxy=http://127.0.0.1:1087 go get golang.org/x/net/html</code></p>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/mysql/mysql中文排序/">mysql按中文拼音排序</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/mysql/">MySQL</a>
            </span>
        </div>
    </header>

    <div class="post-content"><ol>
<li><p>正序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from table_name ORDER BY CONVERT(name USING gbk);</span><br></pre></td></tr></table></figure>
</li>
<li><p>倒序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from table_name ORDER BY CONVERT(name USING gb2312) desc</span><br></pre></td></tr></table></figure></li>
</ol>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/Node.js/cnpm/">cnpm</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/nodejs/">Node.js</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p>vi ~/.bashrc or vi ~/.bash_profile, 添加以下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias cnpm=&apos;npm --registry=https://registry.npm.taobao.org   --cache=$HOME/.npm/.cache/cnpm   --disturl=https://npm.taobao.org/dist   --userconfig=$HOME/.cnpmrc&apos;</span><br></pre></td></tr></table></figure>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/nginx/nginx的location、root、alias指令用法和区别/">nginx的location、root、alias指令用法和区别</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/nginx/">Nginx</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p><a href="http://www.nginx.cn/4658.html" target="_blank" rel="noopener">链接</a></p>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/mysql/数据备份与恢复/">数据备份与恢复</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/mysql/">MySQL</a>
            </span>
        </div>
    </header>

    <div class="post-content"><ol>
<li><p>备份指定的多个数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u root -p --databases choose test &gt; roverliang.sql</span><br></pre></td></tr></table></figure>
</li>
<li><p>备份所有的数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u root -p --all-databases &gt; roverliang.sql</span><br></pre></td></tr></table></figure>
</li>
<li><p>备份指定数据库中的某些表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u root -p  choose table1 table2 &gt; roverliang.sql</span><br></pre></td></tr></table></figure>
</li>
<li><p>导入入mysqldump 的数据文件<br>一句命令就能搞定，在mysql终端中执行命令格式：<code>source FILE_PATH</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/demo.sql</span><br></pre></td></tr></table></figure>

</li>
</ol>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/nginx/sample/">nginx sample</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/nginx/">Nginx</a>
            </span>
        </div>
    </header>

    <div class="post-content"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 3001; # 设置监听端口</span><br><span class="line">    # http://3001/static/filename -&gt; /data/photo/filename</span><br><span class="line">    location /static/ &#123;</span><br><span class="line">        alias  /data/photo/;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/13/Node.js/map/">map使用注意</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-13
        </span><span class="post-category">
            <a href="/categories/nodejs/">Node.js</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p>map的键实际上是和内存地址绑定的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map.set([&apos;a&apos;],333)</span><br><span class="line">map.get([&apos;a&apos;])   //undefine</span><br></pre></td></tr></table></figure>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/11/git/gitignore/">gitignore配置</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-11
        </span><span class="post-category">
            <a href="/categories/git/">Git</a>
            </span>
        </div>
    </header>

    <div class="post-content"><ol>
<li><p>特定文件夹或文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">**/.DS_Store</span><br><span class="line">**/.pyc</span><br><span class="line">**/node_modules</span><br></pre></td></tr></table></figure>
</li>
<li><p>忽略所有没有后缀的文件（一般是可执行文件）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Ignore all</span><br><span class="line">*</span><br><span class="line"></span><br><span class="line"># Unignore all with extensions</span><br><span class="line">!*.*</span><br><span class="line"></span><br><span class="line"># Unignore all dirs</span><br><span class="line">!*/</span><br></pre></td></tr></table></figure></li>
</ol>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/11/Linux_Ubuntu/远程桌面/">支持远程桌面</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-11
        </span><span class="post-category">
            <a href="/categories/linux/">Linux/Ubuntu</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p><a href="https://www.cnblogs.com/nowgood/p/Macremotedesktop.html" target="_blank" rel="noopener">https://www.cnblogs.com/nowgood/p/Macremotedesktop.html</a></p>
<ol>
<li>安装<br><code>sudo apt-get install x11vnc</code></li>
<li>配置vnc密码<br><code>x11vnc -storepasswd</code></li>
<li>启动vnc服务<br><code>x11vnc -forever -shared -rfbauth ~/.vnc/passwd</code></li>
<li>使用 Mac 的 屏幕共享(splotlight 中搜索)登录 IP, 搞定</li>
</ol>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/05/11/go/The Go Programming Language 笔记/">The Go Programming Language 笔记</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-05-11
        </span><span class="post-category">
            <a href="/categories/go/">Go</a>
            </span>
        </div>
    </header>

    <div class="post-content"><h1 id="Chapter-1"><a href="#Chapter-1" class="headerlink" title="Chapter 1"></a>Chapter 1</h1><h2 id="1-2"><a href="#1-2" class="headerlink" title="1.2"></a>1.2</h2><p>i++ is statement, so j = i++ is illegal</p>
<p><code>s := &quot;&quot;</code> can be only used within a function</p>
<p>Package-level variables are initialized before main begins (§2.6.2), and local variables are initialized as their declarations are encountered during function execution</p>
<p>Since new is a predeclared function, not a key word, it’s possible to redefine the name for something else within a function</p>
<h1 id="Chapter-2"><a href="#Chapter-2" class="headerlink" title="Chapter 2"></a>Chapter 2</h1><h3 id="2-3"><a href="#2-3" class="headerlink" title="2.3"></a>2.3</h3><p>The zero value of an aggregate type like an array or a struct has the zero value of all of its elements or fields.<br>The zero-value me chanism ensures that a variable always holds a well-define d value of its type; in Go there is no such thing as an uninitialized variable.</p>
<p>Keep in mind that := is a declaration, whereas = is an assignment</p>
<p>A short variable declaration must declare at least one new variable, however, so this code will not compile:<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f, err := os.Open(infile)</span><br><span class="line">// ...</span><br><span class="line">f, err := os.Create(outfile) // compile error: no new variables</span><br></pre></td></tr></table></figure></p>
<p>Each call to new returns a distinct variable with aunique address:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p := new(int)</span><br><span class="line">q := new(int)</span><br><span class="line">fmt.Println(p == q) // &quot;false&quot;</span><br></pre></td></tr></table></figure>

<p>There is one except ion to this rule: two variables whose type carries no infor mation and is therefore of size zero, such as struct{} or [0]int, may, depending on the implement ation, have the same address.</p>
<h1 id="Chapter-3"><a href="#Chapter-3" class="headerlink" title="Chapter 3"></a>Chapter 3</h1><p>Although Go provides unsigned numbers and arithmetic, we tend to use the signed int form even for quantities that can’t be negative, such as the length of an array, though uint might seem a more obvious choice. Indeed, the built-in len function returns a signed int, as in this loop which announces prize medals in reverse order:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">     medals := []string&#123;&quot;gold&quot;, &quot;silver&quot;, &quot;bronze&quot;&#125;</span><br><span class="line">     for i := len(medals) - 1; i &gt;= 0; i-- &#123;</span><br><span class="line">         fmt.Println(medals[i]) // &quot;bronze&quot;, &quot;silver&quot;, &quot;gold&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The alternative would be calamitous. If len returned an unsigned number, then i too would be a uint, and the condition i &gt;= 0 would always be true by definition. After the third itera- tion, in which i == 0, the i– statement would cause i to become not −1, but the maximum uint value (for example, 264−1), and the evaluation of medals[i] would fail at run time, or panic (§5.9), by attempting to access an element outside the bounds of the slice</p>
<h1 id="Chapter-4"><a href="#Chapter-4" class="headerlink" title="Chapter 4"></a>Chapter 4</h1><p>The size of an array is part of its type, so <code>[3]int</code> and <code>[4]int</code> are different types.</p>
<p>If an array’s element type is comparable then the array type is comparable too, so we may directly compare two arrays of that type using the == operator, which reports whether all corresponding elements are equal. The != operator is its negation.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a := [2]int&#123;1, 2&#125;</span><br><span class="line">b := [...]int&#123;1, 2&#125;</span><br><span class="line">c := [2]int&#123;1, 3&#125;</span><br><span class="line">fmt.Println(a == b, a == c, b == c) // &quot;true false false&quot;</span><br><span class="line">d := [3]int&#123;1, 2&#125;</span><br><span class="line">fmt.Println(a == d) // compile error: cannot compare [2]int == [3]int</span><br></pre></td></tr></table></figure>

<p>Unlike arrays, slices are not comparable, so we cannot use == to test whether two slices contain the same elements. The standard library provides the highly optimized bytes.Equal function for comparing two slices of bytes ([]byte), but for other types of slice, we must do the comparison ourselves</p>
<h3 id="4-3-Maps"><a href="#4-3-Maps" class="headerlink" title="4.3 Maps"></a>4.3 Maps</h3><p>In Go, a map is a reference to a hash table, and a map type is written map[K]V, where K and V are the types of its keys and values. All of the keys in a given map are of the same type, and all of the values are of the same type, but the keys need not be of the same type as the values. The key type K must be comparable using ==, so that the map can test whether a given key is equal to one already within it. Though floating-point numbers are comparable, it’s a bad idea to compare floats for equality and, as we mentioned in Chapter 3, especially bad if NaN is a possible value. There are no restrictions on the value type V.</p>
<p>a map element is not a variable, and we cannot take its address:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_ = &amp;ages[&quot;bob&quot;] // compile error: cannot take address of map element</span><br></pre></td></tr></table></figure>

<h3 id="4-4-structs"><a href="#4-4-structs" class="headerlink" title="4.4 structs"></a>4.4 structs</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">type Employee struct &#123;</span><br><span class="line">         ID        int</span><br><span class="line">         Name      string</span><br><span class="line">         Address   string</span><br><span class="line">         DoB       time.Time</span><br><span class="line">         Position  string</span><br><span class="line">         Salary    int</span><br><span class="line">         ManagerID int</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Field order is significant to type identity. Had we also combined the declaration of the Position field (also a string), or interchanged Name and Address, we would be defining a different struct type.</p>
<p>Nor can you use the (order-based) first form of literal to sneak around the rule that unexported identifiers may not be referred to from another package.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">package p</span><br><span class="line">type T struct&#123; a, b int &#125; // a and b are not exported</span><br><span class="line">package q</span><br><span class="line">import &quot;p&quot;</span><br><span class="line">var _ = p.T&#123;a: 1, b: 2&#125; // compile error: can&apos;t reference a, b</span><br><span class="line">var _ = p.T&#123;1, 2&#125;       // compile error: can&apos;t reference a, b</span><br></pre></td></tr></table></figure>

<p>Although the last line above doesn’t mention the unexported field identifiers, it’s really using them implicitly, so it’s not allowed.</p>
<h3 id="4-4-2-Comparing-Structs"><a href="#4-4-2-Comparing-Structs" class="headerlink" title="4.4.2 Comparing Structs"></a>4.4.2 Comparing Structs</h3><p>If all the fields of a struct are comparable, the struct itself is comparable, so two expressions of that type may be compared using == or !=.<br>Comparable struct types, like other comparable types, may be used as the key type of a map.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">     type address struct &#123;</span><br><span class="line">         hostname string</span><br><span class="line">         port int</span><br><span class="line">&#125;</span><br><span class="line">     hits := make(map[address]int)</span><br><span class="line">     hits[address&#123;&quot;golang.org&quot;, 443&#125;]++</span><br></pre></td></tr></table></figure>

<h1 id="Chapter-5"><a href="#Chapter-5" class="headerlink" title="Chapter 5"></a>Chapter 5</h1><h3 id="5-3-Multiple-Return-Values"><a href="#5-3-Multiple-Return-Values" class="headerlink" title="5.3. Multiple Return Values"></a>5.3. Multiple Return Values</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">func findLinks(url string) ([]string, error) &#123;</span><br><span class="line">resp, err := http.Get(url)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    return nil, err</span><br><span class="line">&#125;</span><br><span class="line">if resp.StatusCode != http.StatusOK &#123;</span><br><span class="line">    resp.Body.Close()</span><br><span class="line">    return nil, fmt.Errorf(&quot;getting %s: %s&quot;, url, resp.Status)</span><br><span class="line">&#125;</span><br><span class="line">doc, err := html.Parse(resp.Body)</span><br><span class="line">resp.Body.Close()</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    return nil, fmt.Errorf(&quot;parsing %s as HTML: %v&quot;, url, err)</span><br><span class="line">&#125;</span><br><span class="line">return visit(nil, doc), nil</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>We must ensure that resp.Body is closed so that network resources are properly released even in case of error. Go’s garbage collector recycles unused memory, but do not assume it will release unused operating system resources like open files and network connections. They should be closed explicitly</p>
<h1 id="Chapter-6"><a href="#Chapter-6" class="headerlink" title="Chapter 6"></a>Chapter 6</h1><p>Named types (Point) and pointers to them (*Point) are the only types that may appear in a receiver declaration. Furthermore, to avoid ambiguities, method declarations are not permit- ted on named types that are themselves pointer types:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type P *int</span><br><span class="line">func (P) f() &#123; /* ... */ &#125; // compile error: invalid receiver type</span><br></pre></td></tr></table></figure>

<h1 id="Chapter-8"><a href="#Chapter-8" class="headerlink" title="Chapter 8"></a>Chapter 8</h1><h3 id="8-4-1"><a href="#8-4-1" class="headerlink" title="8.4.1"></a>8.4.1</h3><p>A send operation on an unbuffered channel blocks the sending goroutine until another goroutine executes a corresponding receive on the same channel, at which point the value is transmitted and both goroutines may continue. Conversely, if the receive operation was attempted first, the receiving goroutine is blocked until another goroutine performs a send on the same channel.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	worklist := make(chan []string)</span><br><span class="line">	// Start with the command-line arguments.</span><br><span class="line">	go func() &#123; worklist &lt;- os.Args[1:] &#125;()</span><br><span class="line">	// Crawl the web concurrently.</span><br><span class="line">	seen := make(map[string]bool)</span><br><span class="line">	for list := range worklist &#123;</span><br><span class="line">		for _, link := range list &#123;</span><br><span class="line">			if !seen[link] &#123;</span><br><span class="line">				seen[link] = true</span><br><span class="line">				go func(link string) &#123;</span><br><span class="line">					worklist &lt;- crawl(link)</span><br><span class="line">				&#125;(link)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Notice that the crawl goroutine takes link as an explicit parameter to avoid the problem of loop variable capture we first saw in Section 5.6.1. Also notice that the initial send of the com- mand-line arguments to the worklist must run in its own goroutine to avoid deadlock, a stuck situation in which both the main goroutine and a crawler goroutine attempt to send to each other while neither is receiving.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">func mirroredQuery() string &#123;</span><br><span class="line">         responses := make(chan string, 3)</span><br><span class="line">         go func() &#123; responses &lt;- request(&quot;asia.gopl.io&quot;) &#125;()</span><br><span class="line">         go func() &#123; responses &lt;- request(&quot;europe.gopl.io&quot;) &#125;()</span><br><span class="line">         go func() &#123; responses &lt;- request(&quot;americas.gopl.io&quot;) &#125;()</span><br><span class="line">         return &lt;-responses // return the quickest response</span><br><span class="line">&#125;</span><br><span class="line">func request(hostname string) (response string) &#123; /* ... */ &#125;</span><br></pre></td></tr></table></figure>

<p>Had we used an unbuffered channel, the two slower goroutines would have gotten stuck trying to send their responses on a channel from which no goroutine will ever receive. This situation, called a goroutine leak, would be a bug. Unlike garbage variables, leaked goroutines are not automatically collected, so it is important to make sure that goroutines terminate themselves when no longer needed.</p>
<p>Failure to allocate sufficient buffer capacity would cause the program to deadlock.</p>
<h1 id="Chapter-9"><a href="#Chapter-9" class="headerlink" title="Chapter 9"></a>Chapter 9</h1><p>p261<br>There are three ways to avoid a data race:<br>The first way is not to write the variable.<br>The second way to avoid a data race is to avoid accessing the variable from multiple goroutines.<br>The third way to avoid a data race is to allow many goroutines to access the variable, but only one at a time. This approach is known as mutual exclusion</p>

        </div></article>
      <nav class="pagination"></nav></section></div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:tjbuggo@email.com" class="iconfont icon-email" title="email"></a>
        <a href="https://github.com/buggoing" class="iconfont icon-github" title="github"></a>
        </div><div class="copyright">
  
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">&copy;2019<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Buggoing</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>
